;-------------------------------------------------------------------
;                           BLINK
;-------------------------------------------------------------------
;AUTHOR: LUAN FERREIRA REIS DE JESUS       LAST REVISION: 12/05/2022
;V 1.0.0
;-------------------------------------------------------------------
;                        DESCRIPTION
;-------------------------------------------------------------------
; Simple code to bink an LED in RB0
;-------------------------------------------------------------------
;                     DEFINITION FILES
;-------------------------------------------------------------------
#INCLUDE <p16f628a.inc>

;-------------------------------------------------------------------
; DEVICE CONFIGURATION
;-------------------------------------------------------------------
    __CONFIG _CONFIG, _LVP_OFF & _BODEN_OFF & _WDTE_OFF & _PWRTE_ON & _INTRC_OSC_NOCLKOUT

;-------------------------------------------------------------------
; VARIABLES
;-------------------------------------------------------------------
    CBLOCK 0x20
        D1
        D2
        D3
    ENDC

;-------------------------------------------------------------------
; RESET VECTOR
;-------------------------------------------------------------------
    ORG     0x0000          ; Initial Address
    NOP
    GOTO    INICIO
;-------------------------------------------------------------------
; SUBSOUTINES
;-------------------------------------------------------------------

DELAY_500MS
;499994 cycles
    MOVLW  0X03
    MOVWF  D1
    MOVLW  0X18
    MOVWF  D2
    MOVLW  0X02
    MOVWF  D3
DELAY_0
    DECFSZ D1, F
    GOTO   $+2
    DECFSZ D2, F
    GOTO   $+2
    DECFSZ D3, F
    GOTO   DELAY_0

;6 cycles
    GOTO   $+1
    GOTO   $+1
    GOTO   $+1
    RETURN

;-------------------------------------------------------------------
; MAIN ROUTINE
;-------------------------------------------------------------------
INICIO
    BANKSEL TRISB
    BCF     TRISB,0
    BANKSEL PORTB
REPETE
    BSF     PORTB,0
    CALL    DELAY_500MS
    BCF     PORTB,0
    CALL    DELAY_500MS
    GOTO    REPETE

;-------------------------------------------------------------------
; END OF PROGRAM
;-------------------------------------------------------------------
    END